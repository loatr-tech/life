(this.webpackJsonplife=this.webpackJsonplife||[]).push([[0],{187:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},303:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},695:function(e,t,a){},696:function(e,t,a){},697:function(e,t,a){},698:function(e,t,a){},699:function(e,t,a){},700:function(e,t,a){},701:function(e,t,a){},702:function(e,t,a){},703:function(e,t,a){},704:function(e,t,a){},705:function(e,t,a){},706:function(e,t,a){},707:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(29),n=a.n(s),r=(a(300),a(38)),i=a(36),o=(a(301),a(23)),l=a(1),d="DESKTOP",j="TABLET",u="MOBILE",b=Object(c.createContext)({});function h(e){var t=Object(c.useState)(d),a=Object(o.a)(t,2),s=a[0],n=a[1],r=Object(c.useState)(!1),i=Object(o.a)(r,2),h=i[0],p=i[1];Object(c.useEffect)((function(){window.innerWidth>768?n(d):window.innerWidth>=576?n(j):n(u)}),[]);return Object(l.jsx)(b.Provider,{value:{screenSize:s,sidePanelOpen:h,toggleSidePanel:function(){p(!h)}},children:e.children})}var p=a(713),O=a(62),m=a(715),x=(a(303),Object(c.createContext)({}));function f(e){var t=Object(c.useState)(),a=Object(o.a)(t,2),s=a[0],n=a[1],r=Object(c.useState)(!1),i=Object(o.a)(r,2),d=i[0],j=i[1];Object(c.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("userInfo")||"null");e&&(n(e),j(!0))}),[]);return Object(l.jsx)(x.Provider,{value:{userInfo:s,setupUser:function(e){n(e),j(!0),window.localStorage.setItem("userInfo",JSON.stringify(e))},loggedIn:d,setLoggedIn:j},children:e.children})}var _=function(){var e=Object(c.useContext)(b),t=e.screenSize,a=e.toggleSidePanel,s=Object(c.useContext)(x),n=s.loggedIn,i=s.userInfo;return Object(l.jsx)("header",{className:"global-header",children:Object(l.jsxs)("div",{className:"global-header__container",children:[Object(l.jsxs)(r.b,{className:"global-header__logo",to:"/",children:[Object(l.jsx)("h1",{children:"\u4e0a\u5cb8"}),Object(l.jsx)("span",{children:"beta"})]}),Object(l.jsx)("div",{className:"global-header__search",children:Object(l.jsx)(p.a.Search,{placeholder:"\u4f60\u5728\u60f3\u5565\uff1f",allowClear:!0,onSearch:function(e){console.log(e)},className:"global-header__search-input"})}),t===u?Object(l.jsx)(O.a,{onClick:function(){return a()},children:Object(l.jsx)("i",{className:"fas fa-bars"})}):n?Object(l.jsx)(r.b,{to:"/user",children:Object(l.jsx)(m.a,{src:i.avatarUrl})}):Object(l.jsx)(r.b,{to:"/login",children:Object(l.jsxs)(O.a,{type:"primary",children:[Object(l.jsx)("i",{className:"fas fa-sign-in-alt"})," \u767b\u5f55"]})})]})})},v=(a(308),a(27)),g=a.n(v),N=a(42);a(309),a(187);function y(e){var t=Math.floor(((new Date).getTime()-new Date(e).getTime())/1e3),a=t/31536e3;return a>1?Math.floor(a)+" \u5e74\u524d":(a=t/2592e3)>1?Math.floor(a)+" \u6708\u524d":(a=t/86400)>1?Math.floor(a)+" \u5929\u524d":(a=t/3600)>1?Math.floor(a)+" \u5c0f\u65f6\u524d":(a=t/60)>1?Math.floor(a)+" \u5206\u949f\u524d":"\u521a\u521a"}function w(e){var t=parseInt(e);return t>1e3?"".concat((t/1e3).toFixed(1),"k"):t>1e6?"".concat((t/1e6).toFixed(1),"m"):t}var S=function(e){var t,a=e.post;return Object(l.jsxs)("div",{className:"post-card",children:[Object(l.jsxs)("section",{className:"post-card__stats",children:[Object(l.jsx)(m.a,{className:"post-card__stats-avatar",children:"U"}),Object(l.jsxs)("div",{className:"post-card__stats-username",children:[Object(l.jsx)("div",{children:null===a||void 0===a||null===(t=a.owner)||void 0===t?void 0:t.name}),Object(l.jsx)("div",{className:"post-card__stats-ago",children:y(null===a||void 0===a?void 0:a.createdAt)})]}),Object(l.jsxs)("div",{className:"post-card__stats-icon",children:[Object(l.jsx)("i",{className:"far fa-eye"})," ",w(null===a||void 0===a?void 0:a.views)]}),Object(l.jsxs)("div",{className:"post-card__stats-icon",children:[Object(l.jsx)("i",{className:"far fa-thumbs-up"})," ",w(null===a||void 0===a?void 0:a.likes)]}),Object(l.jsxs)("div",{className:"post-card__stats-icon",children:[Object(l.jsx)("i",{className:"far fa-comment"})," ",w(null===a||void 0===a?void 0:a.comments)]})]}),Object(l.jsx)("hr",{className:"post-card__divider"}),Object(l.jsxs)(r.b,{to:"/post/".concat(a.id),className:"post-card__details",children:[Object(l.jsx)("h3",{className:"post-card__details-title",children:a.title}),Object(l.jsx)("p",{className:"post-card__details-content",children:a.content||"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quasi nemo mollitia repellendus, laudantium unde, vel iste tempora eum nihil aperiam aliquid? Deleniti cum beatae iste sapiente molestias ullam consequatur alias."})]})]})},k=a(183),C=[{id:"career",name:"\u6253\u5de5\u4eba\u513f",icon:"fas fa-suitcase",subcategories:[{id:"career_exp",type:"group",name:"\u7ecf\u9a8c\u5206\u4eab",subcategories:[{id:"experience_sharing"},{id:"promotion"}]},{id:"career_data",type:"group",name:"\u6570\u636e\u5206\u4eab",subcategories:[{id:"total_package"},{id:"interview_questions"}]},{id:"career_opportunities",type:"group",name:"\u804c\u4f4d\u5206\u4eab",subcategories:[{id:"need_referral"},{id:"we_re_hiring"}]}]},{id:"immigration",name:"\u7559\u5b66\u79fb\u6c11",icon:"far fa-id-card",subcategories:[{id:"international_student",type:"group",name:"\u7559\u5b66\u7533\u8bf7",subcategories:[{id:"apply_school"},{id:"application_results"}]},{id:"immigration",type:"group",name:"\u79fb\u6c11\u7b7e\u8bc1",subcategories:[{id:"work_visa"},{id:"green_card"},{id:"student_visa"}]}]},{id:"study",name:"\u5929\u5929\u5411\u4e0a",icon:"fas fa-book-reader",subcategories:[{id:"lets_study"},{id:"leet_code"}]},{id:"neighborhood",name:"\u8857\u574a\u90bb\u5c45",icon:"fas fa-people-arrows",subcategories:[{id:"used_items"},{id:"house_rental"}]}],I={experience_sharing:"\u7ecf\u9a8c\u5206\u4eab",promotion:"\u5347\u804c\u52a0\u85aa",total_package:"\u6211\u7684\u5305\u88f9",interview_questions:"\u5317\u7f8e\u9762\u7ecf",need_referral:"\u8dea\u6c42\u5185\u63a8",we_re_hiring:"\u6211\u8981\u62db\u4eba",apply_school:"\u7533\u8bf7\u5b66\u6821",application_results:"\u7533\u8bf7\u7ed3\u679c",work_visa:"\u5de5\u4f5c\u7b7e\u8bc1",green_card:"\u79fb\u6c11\u7eff\u5361",student_visa:"\u5b66\u751f\u7b7e\u8bc1",lets_study:"\u6211\u8981\u81ea\u4e60",leet_code:"\u7ec4\u961f\u5237\u9898",used_items:"\u4e8c\u624b\u5e02\u573a",house_rental:"\u623f\u5c4b\u51fa\u79df"},M={experience_sharing:"\u6253\u5de5\u4eba\u513f",promotion:"\u6253\u5de5\u4eba\u513f",total_package:"\u6253\u5de5\u4eba\u513f",interview_questions:"\u6253\u5de5\u4eba\u513f",need_referral:"\u6253\u5de5\u4eba\u513f",we_re_hiring:"\u6253\u5de5\u4eba\u513f",work_visa:"\u7559\u5b66\u79fb\u6c11",green_card:"\u7559\u5b66\u79fb\u6c11",student_visa:"\u7559\u5b66\u79fb\u6c11",lets_study:"\u5929\u5929\u5411\u4e0a",leet_code:"\u5929\u5929\u5411\u4e0a",used_items:"\u8857\u574a\u9886\u5c45",house_rental:"\u8857\u574a\u9886\u5c45"},E=Object(c.createContext)({});function z(e){var t=Object(c.useState)("all"),a=Object(o.a)(t,2),s=a[0],n=a[1];return Object(l.jsx)(E.Provider,{value:{activeCategory:s,setActiveCategory:n},children:e.children})}var A=function(e){var t=e.onCategoryChange,a=Object(c.useContext)(E),s=a.activeCategory,n=a.setActiveCategory;return Object(l.jsxs)(k.a,{onClick:function(e){return function(e){var a=e.key;n(a),null===t||void 0===t||t(a)}(e)},defaultSelectedKeys:[s],defaultOpenKeys:["career"],mode:"inline",children:[Object(l.jsx)(k.a.Item,{icon:Object(l.jsx)("i",{className:"fas fa-rss"}),children:"\u6700\u65b0\u52a8\u6001"},"all"),C.map((function(e){return Object(l.jsx)(k.a.SubMenu,{icon:Object(l.jsx)("i",{className:e.icon}),title:e.name,children:e.subcategories.map((function(e){return"group"===e.type?Object(l.jsx)(k.a.ItemGroup,{title:e.name,children:e.subcategories.map((function(e){return Object(l.jsx)(k.a.Item,{children:I[e.id]},e.id)}))},e.id):Object(l.jsx)(k.a.Item,{children:I[e.id]},e.id)}))},e.id)}))]})},F=a(181),P=a.n(F),B="".concat("https://loatr-tech-api.herokuapp.com/","life"),U={get:function(e,t){return P.a.get("".concat(B,"/").concat(e),t)},post:function(e,t){return P.a.post("".concat(B,"/").concat(e),t)}};var q=function(){return Object(l.jsxs)("div",{className:"post-card",children:[Object(l.jsxs)("section",{className:"post-card__stats",children:[Object(l.jsx)(m.a,{className:"post-card__stats-avatar"}),Object(l.jsxs)("div",{className:"post-card__stats-username",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{className:"post-card__stats-ago"})]}),Object(l.jsx)("div",{className:"post-card__stats-icon",children:Object(l.jsx)("i",{className:"far fa-eye"})}),Object(l.jsx)("div",{className:"post-card__stats-icon",children:Object(l.jsx)("i",{className:"far fa-thumbs-up"})}),Object(l.jsx)("div",{className:"post-card__stats-icon",children:Object(l.jsx)("i",{className:"far fa-comment"})})]}),Object(l.jsx)("hr",{className:"post-card__divider"}),Object(l.jsx)("h3",{className:"post-card__details-title post-card-placeholder"}),Object(l.jsx)("p",{className:"post-card__details-content post-card-placeholder"})]})};var T=function(){var e=Object(c.useContext)(b).screenSize,t=Object(c.useContext)(E).activeCategory,a=Object(c.useState)([]),s=Object(o.a)(a,2),n=s[0],i=s[1],j=Object(c.useState)(!1),u=Object(o.a)(j,2),h=u[0],p=u[1];return Object(c.useEffect)((function(){(function(){var e=Object(N.a)(g.a.mark((function e(){var a,c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),a={},t&&"all"!==t&&(a.category=t),e.next=5,U.get("posts",{params:a});case 5:c=e.sent,s=c.data,i(s.items),p(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(l.jsxs)("main",{className:"home-main",children:[Object(l.jsx)("section",{className:"home-navigation",children:Object(l.jsx)(A,{})}),Object(l.jsxs)("section",{className:"home-content",children:[e!==d&&Object(l.jsx)("div",{className:"home-content__actions",children:Object(l.jsx)(r.b,{to:"/new-post",children:Object(l.jsxs)(O.a,{shape:"round",size:"middle",children:[Object(l.jsx)("i",{className:"fas fa-pen"})," \u53d1\u5e16"]})})}),h?new Array(5).fill(null).map((function(e,t){return Object(l.jsx)(q,{},t)})):n.map((function(e){return Object(l.jsx)(S,{post:e},e.id)}))]}),Object(l.jsx)("section",{className:"home-sidebar",children:Object(l.jsx)(r.b,{to:"/new-post",children:Object(l.jsxs)(O.a,{shape:"round",size:"middle",block:!0,children:[Object(l.jsx)("i",{className:"fas fa-pen"})," \u53d1\u5e16"]})})})]})};var R=function(){return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(T,{}),Object(l.jsx)("footer",{className:"home-footer",children:"\xa92021 Created by Loatr"})]})},L=(a(327),a(716)),D=a(710),G=a(717);var J=function(){var e=Object(i.f)(),t=Object(c.useContext)(x),a=t.userInfo,s=t.loggedIn;return Object(c.useEffect)((function(){e&&!s&&e.push("/login")}),[e,s]),Object(l.jsxs)("div",{className:"user",children:[Object(l.jsxs)(L.a,{className:"user-path",children:[Object(l.jsx)(L.a.Item,{children:Object(l.jsxs)(r.b,{to:"/",children:[Object(l.jsx)(G.a,{})," \u4e3b\u9875"]})}),Object(l.jsx)(L.a.Item,{children:"\u7528\u6237"})]}),Object(l.jsx)("header",{className:"user-header",children:Object(l.jsx)("div",{className:"user-avatar",children:Object(l.jsx)("img",{src:null===a||void 0===a?void 0:a.avatarUrl,alt:"User avatar"})})}),Object(l.jsxs)("section",{className:"user-details",children:[Object(l.jsx)("h2",{className:"user-name",children:null===a||void 0===a?void 0:a.name}),Object(l.jsx)(D.a,{}),Object(l.jsxs)("div",{className:"user-stats",children:[Object(l.jsx)("span",{children:"\u5e16\u5b50 12"}),Object(l.jsx)("span",{children:"\u7c89\u4e1d 12"}),Object(l.jsx)("span",{children:"\u5173\u6ce8 4"})]})]})]})};a(328),a(329);var Y=function(e){var t,a,c=e.post,s=e.fetching;return Object(l.jsxs)("div",{className:"post-owner",children:[Object(l.jsxs)("section",{className:"post-owner__user-info",children:[Object(l.jsx)(m.a,{className:"post-owner__avatar ".concat(s?"loading-placeholder":""),size:64,children:null===c||void 0===c||null===(t=c.owner)||void 0===t?void 0:t.name[0]}),Object(l.jsx)("h3",{children:null===c||void 0===c||null===(a=c.owner)||void 0===a?void 0:a.name}),Object(l.jsx)("div",{className:"post-owner__ago ".concat(s?"post-owner__ago-loading loading-placeholder":""),children:(null===c||void 0===c?void 0:c.createdAt)?"\u53d1\u5e03\u4e8e ".concat(y(c.createdAt)):""})]}),Object(l.jsxs)("section",{className:"post-owner__stats",children:[Object(l.jsxs)("div",{className:"post-card__stats-icon",children:[Object(l.jsx)("i",{className:"far fa-eye"})," ",w(c.views)]}),Object(l.jsxs)("div",{className:"post-card__stats-icon",children:[Object(l.jsx)("i",{className:"far fa-thumbs-up"})," ",w(c.likes)]}),Object(l.jsxs)("div",{className:"post-card__stats-icon",children:[Object(l.jsx)("i",{className:"far fa-comment"})," ",w(c.comments)]})]})]})},K=a(140),H=a.n(K),W=(a(695),a(711));a(696),a(697),a(698);var Q=function(e){var t=e.isHero,a=e.reply;return Object(l.jsxs)("div",{className:"post-reply ".concat(t?"post-reply--hero":""),children:[Object(l.jsx)("section",{className:"post-reply__avatar",children:Object(l.jsx)(m.a,{children:"R"})}),Object(l.jsxs)("section",{className:"post-reply__content",children:[Object(l.jsxs)("div",{className:"post-reply__header",children:[Object(l.jsx)("span",{className:"post-reply__header-username",children:"\u5cb8\u4e0a\u67d0\u4f4d\u7528\u6237"}),Object(l.jsx)("span",{className:"post-reply__header-ago",children:y(null===a||void 0===a?void 0:a.createdAt)})]}),Object(l.jsx)("div",{className:"post-reply__content-message",children:(null===a||void 0===a?void 0:a.reply)||"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cumque animi dicta natus pariatur sequi distinctio iste debitis? Veritatis, architecto placeat, aliquid enim perferendis ad quidem ipsum doloribus minus voluptatibus provident."})]})]})};a(699);var V=function(){return Object(l.jsxs)("div",{className:"lds-ellipsis",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})};a(700);var X=function(e){var t=e.thread,a=e.refreshReplies,s=e.children,n=Object(c.useContext)(x).userInfo,r=Object(c.useState)(!1),i=Object(o.a)(r,2),d=i[0],j=i[1],u=Object(c.useState)(""),b=Object(o.a)(u,2),h=b[0],p=b[1],f=Object(c.useState)(!1),_=Object(o.a)(f,2),v=_[0],w=_[1],S=function(){var e=Object(N.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,U.post("post/reply",{post_id:t.post_id,thread_id:t.id,reply:h,user_id:n.id});case 3:p(""),j(!1),w(!1),a();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"post-thread__head",children:[Object(l.jsxs)("div",{className:"post-thread__head-container",children:[Object(l.jsx)("section",{className:"post-thread__head-avatar",children:Object(l.jsx)(m.a,{children:"R"})}),Object(l.jsxs)("section",{className:"post-thread__head-content",children:[Object(l.jsxs)("div",{className:"post-thread__head-header",children:[Object(l.jsx)("span",{className:"post-thread__head-header-username",children:"\u5cb8\u4e0a\u67d0\u4f4d\u7528\u6237"}),Object(l.jsx)("span",{className:"post-thread__head-header-ago",children:y(null===t||void 0===t?void 0:t.createdAt)})]}),Object(l.jsx)("p",{className:"post-thread__head-content-message",children:null===t||void 0===t?void 0:t.comment}),Object(l.jsxs)("div",{className:"post-thread__head-action",children:[Object(l.jsxs)("span",{className:"post-card__head-interaction",children:[Object(l.jsx)("i",{className:"far fa-thumbs-up"})," 123"]}),Object(l.jsxs)("span",{className:"post-card__head-interaction",children:[Object(l.jsx)("i",{className:"far fa-thumbs-down"})," 45"]}),Object(l.jsx)(O.a,{size:"small",type:"text",onClick:function(){return j(!d)},disabled:v,children:"\u56de\u590d"})]})]})]}),d&&Object(l.jsxs)("div",{className:"post-thread__reply",children:[Object(l.jsxs)("div",{className:"post-thread__reply-textarea-container",children:[Object(l.jsx)("span",{className:"post-thread__reply-textarea-avatar",children:Object(l.jsx)(m.a,{children:"M"})}),Object(l.jsx)("textarea",{className:"post-thread__reply-textarea",name:"comment-textarea",rows:2,placeholder:"\u8bf4\u70b9\u4ec0\u4e48...",value:h,onChange:function(e){return p(e.target.value)},disabled:v})]}),Object(l.jsxs)("div",{className:"post-thread__reply-textarea-actions",children:[Object(l.jsx)(O.a,{size:"small",onClick:function(){return S()},loading:v,children:"\u56de\u590d"}),Object(l.jsx)(O.a,{size:"small",type:"text",onClick:function(){return j(!1)},disabled:v,children:"\u53d6\u6d88"})]})]}),s]})};var Z=function(e){var t=e.thread,a=Object(c.useContext)(x).userInfo,s=Object(c.useState)(!1),n=Object(o.a)(s,2),r=n[0],i=n[1],d=Object(c.useState)([]),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(1),p=Object(o.a)(h,2),m=p[0],f=p[1],_=Object(c.useState)((null===t||void 0===t?void 0:t.replies)||0),v=Object(o.a)(_,2),y=v[0],w=v[1],S=Object(c.useState)(!1),k=Object(o.a)(S,2),C=k[0],I=k[1],M=Object(c.useState)(!1),E=Object(o.a)(M,2),z=E[0],A=E[1],F=function(){var e=Object(N.a)(g.a.mark((function e(a){var c,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get("post/".concat(t.post_id,"/comment/").concat(t.id,"/replies"),{params:{page:a,limit:10}});case 2:return c=e.sent,s=c.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(N.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}i(!1),b([]),f(1),e.next=14;break;case 6:return i(!0),I(!0),e.next=10,F(m);case 10:t=e.sent,I(!1),b(t.replies),w(t.count);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(N.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(1);case 2:t=e.sent,f(1),b(t.replies),w(t.count);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(N.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),t=m+1,e.next=4,F(t);case 4:a=e.sent,f(t),b(u.concat(a.replies)),w(a.count),A(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"post-thread",children:[Object(l.jsx)(X,{thread:t,refreshReplies:B,children:y>0&&Object(l.jsxs)(O.a,{className:"post-thread__view-reply",type:"link",onClick:function(){return P()},children:[Object(l.jsx)("i",{className:"fas fa-caret-".concat(r?"up":"down")})," ",r?"\u6536\u8d77\u56de\u590d":"\u67e5\u770b".concat(y,"\u6761\u56de\u590d")]})}),r&&Object(l.jsxs)("div",{className:"post-thread__replys",children:[C&&Object(l.jsx)("div",{className:"post-thread__replys-loading",children:Object(l.jsx)(V,{})}),u.map((function(e){return Object(l.jsx)(Q,{reply:e,isHero:e.user_id===a.id},e.id)})),!C&&y>u.length&&Object(l.jsxs)(O.a,{type:"link",className:"post-thread__expand",onClick:function(){return q()},loading:z,children:[Object(l.jsx)("span",{className:"post-thread__expand-line"}),"\u5c55\u5f00\u66f4\u591a\u56de\u590d (",y-u.length,")"]})]})]})};var $=function(e){var t=e.post,a=Object(c.useContext)(x).userInfo,s=Object(c.useState)([]),n=Object(o.a)(s,2),r=n[0],i=n[1],d=Object(c.useState)(""),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(0),p=Object(o.a)(h,2),f=p[0],_=p[1],v=Object(c.useState)(!1),y=Object(o.a)(v,2),w=y[0],S=y[1];function k(e){return C.apply(this,arguments)}function C(){return(C=Object(N.a)(g.a.mark((function e(t){var a,c,s,n=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:1,e.next=3,U.get("post/".concat(t.id,"/comments"),{params:{page:a,limit:10}});case 3:c=e.sent,s=c.data,i(s.threads),_(s.count);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){(null===t||void 0===t?void 0:t.id)&&k(t)}),[t]);var I=function(){var e=Object(N.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,U.post("post/comment",{post_id:t.id,comment:u,user_id:a.id});case 3:b(""),S(!1),k(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("section",{className:"post-comments",children:[(null===r||void 0===r?void 0:r.length)>0&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("h3",{children:[Object(l.jsx)("i",{className:"far fa-comments"})," \u8bc4\u8bba\u533a (",t.comments,")"]}),r.map((function(e){return Object(l.jsx)(Z,{thread:e},e.id)})),Object(l.jsx)(W.a,{className:"post-comments__pagination",size:"small",defaultCurrent:1,pageSize:10,onChange:function(e){k(t,e)},showSizeChanger:!1,total:f})]}),Object(l.jsx)(D.a,{}),Object(l.jsxs)("div",{className:"post-comments__textarea-container",children:[Object(l.jsx)("span",{className:"post-comments__textarea-avatar",children:Object(l.jsx)(m.a,{size:36,children:"M"})}),Object(l.jsx)("textarea",{className:"post-comments__textarea",name:"comment-textarea",rows:4,value:u,onChange:function(e){return b(e.target.value)},disabled:w})]}),Object(l.jsx)("div",{className:"post-comments__textarea-actions",children:Object(l.jsx)(O.a,{onClick:function(){return I()},loading:w,children:"\u7559\u8a00"})})]})};var ee=function(e){var t=e.post,a=e.fetching;return Object(l.jsxs)("div",{className:"post-main",children:[Object(l.jsx)("header",{className:"post-main__title",children:Object(l.jsx)("h1",{className:"post-main__title-text ".concat(a?"post-mian__placeholder loading-placeholder":""),children:t.title})}),Object(l.jsx)("main",{className:"post-main__content",children:a?Object(l.jsxs)("div",{className:"post-main__content-placeholder",children:[Object(l.jsx)("div",{className:"loading-placeholder"}),Object(l.jsx)("div",{className:"loading-placeholder"}),Object(l.jsx)("div",{className:"loading-placeholder"})]}):Object(l.jsx)(H.a,{value:t.content,readOnly:!0})}),Object(l.jsx)("p",{className:"post-main_copyright-disclaimer",children:"\u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\uff0c\u672a\u7ecf\u6388\u6743\u7981\u6b62\u8f6c\u8f7d"}),!a&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("section",{className:"post-main__interactions",children:[Object(l.jsx)(O.a,{type:"primary",shape:"circle",children:Object(l.jsx)("i",{className:"far fa-thumbs-up"})}),Object(l.jsx)(O.a,{type:"primary",shape:"circle",children:Object(l.jsx)("i",{className:"far fa-star"})}),Object(l.jsx)(O.a,{type:"primary",shape:"circle",children:Object(l.jsx)("i",{className:"fas fa-share-alt"})}),Object(l.jsx)(O.a,{type:"primary",shape:"circle",children:Object(l.jsx)("i",{className:"far fa-bookmark"})})]}),Object(l.jsx)($,{post:t})]})]})};var te=function(e){var t=Object(c.useState)({}),a=Object(o.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)(!1),d=Object(o.a)(i,2),j=d[0],u=d[1];return Object(c.useEffect)((function(){(function(){var t=Object(N.a)(g.a.mark((function t(){var a,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.next=3,U.get("post/".concat(e.match.params.postId));case 3:a=t.sent,c=a.data,u(!1),n(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.match.params.postId]),Object(l.jsxs)("div",{className:"post",children:[Object(l.jsx)("section",{className:"post__path",children:Object(l.jsxs)(L.a,{children:[Object(l.jsx)(L.a.Item,{children:Object(l.jsxs)(r.b,{to:"/",children:[Object(l.jsx)(G.a,{})," \u4e3b\u9875"]})}),Object(l.jsx)(L.a.Item,{children:M[s.category]}),Object(l.jsx)(L.a.Item,{children:I[s.category]})]})}),Object(l.jsxs)("section",{className:"post__container",children:[Object(l.jsx)(Y,{post:s}),Object(l.jsx)(ee,{post:s,fetching:j})]})]})},ae=(a(701),a(712)),ce=a(714);a(702);var se=function(e){var t=e.selectedCategory,a=e.setSelectedCategory,s=e.showMissingField,n=Object(c.useState)(!1),r=Object(o.a)(n,2),i=r[0],d=r[1],j=Object(c.useState)(t),u=Object(o.a)(j,2),b=u[0],h=u[1],p=function(e){h(e.target.value)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("h3",{className:"post-creation-category__btn",children:["\u6587\u7ae0\u5206\u7c7b:"," ",Object(l.jsxs)(O.a,{onClick:function(){return d(!0)},size:"small",shape:t?"round":void 0,danger:!(t||!s),children:[t?Object(l.jsx)("i",{className:"fas fa-pen"}):"\u8bf7\u9009\u62e9",t?I[t]:""]})]}),Object(l.jsx)(ae.a,{className:"post-creation-category__modal",title:"\u9009\u62e9\u5206\u7c7b",visible:i,onOk:function(){return a(b),void d(!1)},onCancel:function(){return d(!1)},children:C.map((function(e){return Object(l.jsxs)("section",{className:"post-creation-category__modal-section",children:[Object(l.jsx)("h3",{children:e.name}),Object(l.jsx)(ce.a.Group,{onChange:p,value:b,children:e.subcategories.map((function(e){return"group"===e.type?e.subcategories.map((function(e){return Object(l.jsx)(ce.a,{value:e.id,children:I[e.id]},e.id)})):Object(l.jsx)(ce.a,{value:e.id,children:I[e.id]},e.id)}))})]},e.name)}))})]})};var ne=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),s=a[0],n=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),d=i[0],j=i[1],u=Object(c.useState)(""),b=Object(o.a)(u,2),h=b[0],m=b[1],x=Object(c.useState)(!1),f=Object(o.a)(x,2),_=f[0],v=f[1],y=Object(c.useState)(!1),w=Object(o.a)(y,2),S=w[0],k=w[1],C=function(){var t=Object(N.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k(!0),!(s.length&&d.length&&h)){t.next=8;break}return v(!0),a={title:s,content:d,category:h},t.next=6,U.post("post",a);case 6:v(!1),e.history.push("/");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"post-creation",children:[Object(l.jsxs)("section",{className:"post-creation__actions",children:[Object(l.jsx)(se,{selectedCategory:h,setSelectedCategory:m,showMissingField:S}),Object(l.jsx)(D.a,{}),Object(l.jsx)(O.a,{onClick:function(){return C()},block:!0,loading:_,disabled:_,children:"\u53d1\u5e03"})]}),Object(l.jsxs)("section",{className:"post-creation__editor",children:[Object(l.jsx)("div",{className:"post-creation__editor-title ".concat(!s&&S?"post-creation__missing-field":""),children:Object(l.jsx)(p.a,{placeholder:"\u8f93\u5165\u4f60\u7684\u6807\u9898",value:s,onChange:function(e){n(e.target.value)}})}),Object(l.jsx)("div",{className:"post-creation__editor-content ".concat(!d&&S?"post-creation__missing-field":""),children:Object(l.jsx)(H.a,{placeholder:"\u5199\u4e0b\u4f60\u7684\u5fc3\u8def\u5386\u7a0b",onChange:function(e){return function(e){var t=e();j(t)}(e)}})}),Object(l.jsx)("div",{className:"post-creation__editor-actions",children:Object(l.jsx)(O.a,{onClick:function(){return C()},loading:_,disabled:_,children:"\u53d1\u5e03"})})]})]})};a(703);var re=function(){var e=Object(i.f)(),t=Object(c.useContext)(b),a=t.sidePanelOpen,s=t.toggleSidePanel,n=Object(c.useContext)(x),o=n.loggedIn,d=n.userInfo;return Object(l.jsxs)("div",{className:"global-side-panel ".concat(a?"side-panel-opened":""),children:[o?Object(l.jsxs)("section",{className:"global-side-panel__user",onClick:function(){return s(),void e.push("/user")},children:[Object(l.jsx)(m.a,{src:d.avatarUrl}),Object(l.jsx)("span",{className:"global-side-panel__user-name",children:d.name}),Object(l.jsx)("i",{className:"fas fa-chevron-right"})]}):Object(l.jsx)(r.b,{to:"/login",className:"global-side-panel__login",children:Object(l.jsxs)(O.a,{type:"primary",children:[Object(l.jsx)("i",{className:"fas fa-sign-in-alt"})," \u767b\u5f55"]})}),Object(l.jsx)(D.a,{}),Object(l.jsx)(i.c,{children:Object(l.jsx)(i.a,{path:"/",exact:!0,children:Object(l.jsx)(A,{onCategoryChange:function(){return s()}})})})]})};a(704);var ie=function(){var e=Object(c.useContext)(x).setupUser;return Object(c.useEffect)((function(){var e=!1;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=document.getElementsByTagName("script")[0],c=a,s=a;(s=document.createElement("script")).id="google-login",s.src="https://apis.google.com/js/api.js",c&&c.parentNode?c.parentNode.insertBefore(s,c):document.head.appendChild(s),s.onerror=t,s.onload=e}((function(){var t=window.gapi;t.load("auth2",(function(){if(!t.auth2.getAuthInstance()){var a={client_id:"".concat("599516985499-jaebi4prb2jv6nbqab34jom5m42qa8d7",".apps.googleusercontent.com"),cookie_policy:"single_host_origin"};t.auth2.init(a).then((function(t){if(!e){console.log(t);var a=t.isSignedIn.get();if(console.log("isSignedIn",a),a){var c=t.currentUser.get();console.log(c)}}}))}}))})),function(){e=!0,function(){var e=document.getElementById("google-login");e&&e.parentNode.removeChild(e)}()}})),Object(l.jsxs)(O.a,{onClick:function(){window.gapi.auth2.getAuthInstance().signIn({}).then((function(t){console.log("login succeed",t);var a=t.getBasicProfile(),c=t.getAuthResponse(!0),s={};s.googleId=a.getId(),s.tokenObj=c,s.tokenId=c.id_token,s.accessToken=c.access_token,s.profileObj={googleId:a.getId(),imageUrl:a.getImageUrl(),email:a.getEmail(),name:a.getName(),givenName:a.getGivenName(),familyName:a.getFamilyName()},console.log("data",s),U.post("login",{method:"google",googleId:s.googleId,user:s.profileObj}).then((function(t){var a=t.data;e(a)}))}),(function(e){console.log("login failed",e)}))},children:[Object(l.jsx)("i",{className:"fab fa-google"})," \u4f7f\u7528Google\u767b\u5f55"]})};var oe=function(){return Object(l.jsxs)("div",{className:"login",children:[Object(l.jsxs)(L.a,{className:"user-path",children:[Object(l.jsx)(L.a.Item,{children:Object(l.jsxs)(r.b,{to:"/",children:[Object(l.jsx)(G.a,{})," \u4e3b\u9875"]})}),Object(l.jsx)(L.a.Item,{children:"\u7528\u6237\u767b\u5f55"})]}),Object(l.jsxs)("form",{className:"login-form",children:[Object(l.jsx)("h3",{children:"\u9009\u62e9\u767b\u5f55\u65b9\u5f0f"}),Object(l.jsx)(ie,{})]})]})},le=a(184),de=(a(705),[{company:"Apple",base:2e5,rsu:6e5,annual_bonus:.1,signon:[75e3,25e3],yoy_sotck_appreciation:1.25,yoy_base_appreciation:1.035,rsu_refresher:1e5}]);var je=function(){var e=Object(c.useState)(de),t=Object(o.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){var e=[].concat(de).map((function(e){for(var t=[],a=0;a<4;a++){var c={};a>0?(c.base=Math.round(t[a-1].base*e.yoy_base_appreciation),c.rsu=Math.round(e.rsu/4*Math.pow(e.yoy_sotck_appreciation,a)+e.rsu_refresher/4*(a-1))):(c.base=e.base,c.rsu=e.rsu/4),c.total_comp=Math.round(c.base*(1+e.annual_bonus)+c.rsu+(e.signon[a]||0)),t.push(c)}for(var s=[],n=0;n<t.length;n++){var r={};(r=n>0?{cash:s[n-1].cash+t[n].total_comp-t[n].rsu,rsu:Math.round(s[n-1].rsu*e.yoy_sotck_appreciation+t[n].rsu)}:{cash:t[n].total_comp-t[n].rsu,rsu:t[n].rsu}).accumulated=r.cash+r.rsu,s.push(r)}return Object(le.a)(Object(le.a)({},e),{},{total_comps:t,accumulated:s})}));console.log("editedOffers",e),s(e)}),[]),Object(l.jsxs)("table",{className:"calculator-offer",children:[Object(l.jsxs)("thead",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{rowSpan:2,children:"Company"}),Object(l.jsx)("th",{colSpan:3,children:"Basic"}),Object(l.jsx)("th",{colSpan:2,children:"Sign-on"}),Object(l.jsx)("th",{colSpan:3,children:"Raises"}),Object(l.jsx)("th",{colSpan:4,children:"TC each year"}),Object(l.jsx)("th",{rowSpan:2,children:"Total income"})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Base"}),Object(l.jsx)("th",{children:"RSU"}),Object(l.jsx)("th",{children:"Bonus"}),Object(l.jsx)("th",{children:"(1st yr)"}),Object(l.jsx)("th",{children:"(2nd yr)"}),Object(l.jsx)("th",{children:"RSU Refresher"}),Object(l.jsx)("th",{children:"Base up%"}),Object(l.jsx)("th",{children:"Stock up%"}),Object(l.jsx)("th",{children:"Year 1"}),Object(l.jsx)("th",{children:"Year 2"}),Object(l.jsx)("th",{children:"Year 3"}),Object(l.jsx)("th",{children:"Year 4"})]})]}),Object(l.jsx)("tbody",{children:a.map((function(e){var t,a,c;return[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{rowSpan:2,children:e.company}),Object(l.jsx)("td",{children:"".concat(Math.round(e.base/1e3),"k")}),Object(l.jsx)("td",{children:"".concat(Math.round(e.rsu/1e3),"k")}),Object(l.jsx)("td",{children:"".concat(100*e.annual_bonus,"%")}),Object(l.jsx)("td",{children:"".concat(Math.round((e.signon[0]||0)/1e3),"k")}),Object(l.jsx)("td",{children:"".concat(Math.round((e.signon[1]||0)/1e3),"k")}),Object(l.jsx)("td",{children:"".concat(Math.round(e.rsu_refresher/1e3),"k")}),Object(l.jsx)("td",{children:e.yoy_base_appreciation}),Object(l.jsx)("td",{children:e.yoy_sotck_appreciation}),null===(t=e.total_comps)||void 0===t?void 0:t.map((function(e,t){return Object(l.jsx)("td",{children:"".concat(Math.round(e.total_comp/1e3),"k")},t)})),Object(l.jsx)("td",{children:null===(a=e.total_comps)||void 0===a?void 0:a.reduce((function(e,t){return e+t.total_comp}),0)})]},e.company),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{colSpan:8,children:"Accumulated"}),null===(c=e.accumulated)||void 0===c?void 0:c.map((function(e,t){return Object(l.jsx)("td",{children:"".concat((e.accumulated/1e6).toFixed(2),"m")},t)}))]},"".concat(e.company,"_acc"))]}))})]})};a(706);var ue=function(){return Object(l.jsx)("div",{className:"calculator",children:Object(l.jsx)(je,{})})};var be=function(){var e=Object(c.useContext)(b),t=e.screenSize,a=e.sidePanelOpen;return Object(l.jsxs)(r.a,{children:[Object(l.jsxs)("main",{className:"app-container ".concat(a?"app-container-pushed":""),children:[Object(l.jsx)(_,{}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"/",exact:!0,component:R}),Object(l.jsx)(i.a,{path:"/post/:postId",component:te}),Object(l.jsx)(i.a,{path:"/new-post",component:ne}),Object(l.jsx)(i.a,{path:"/login",component:oe}),Object(l.jsx)(i.a,{path:"/user",component:J}),Object(l.jsx)(i.a,{path:"/calculator",component:ue})]})]}),t===u&&Object(l.jsx)(re,{})]})},he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,718)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};function pe(e){return Object(l.jsx)(h,{children:Object(l.jsx)(f,{children:Object(l.jsx)(z,{children:e.children})})})}n.a.render(Object(l.jsx)(pe,{children:Object(l.jsx)(be,{})}),document.getElementById("root")),he()}},[[707,1,2]]]);
//# sourceMappingURL=main.d6d2746c.chunk.js.map